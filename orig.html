<!DOCTYPE html>
<html lang="zh-TW">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>SEO 與社群媒體預覽檢查工具</title>
		<script src="https://cdn.tailwindcss.com"></script>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
		<style>
			.loading-spinner {
				border: 4px solid rgba(0, 0, 0, 0.1);
				border-radius: 50%;
				border-top: 4px solid #3b82f6;
				width: 40px;
				height: 40px;
				animation: spin 1s linear infinite;
			}
			@keyframes spin {
				0% {
					transform: rotate(0deg);
				}
				100% {
					transform: rotate(360deg);
				}
			}
			.social-card {
				transition: all 0.3s ease;
			}
			.social-card:hover {
				transform: translateY(-5px);
				box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
			}
			.seo-score {
				transition: all 0.5s ease;
			}
			.progress-ring__circle {
				transition: stroke-dashoffset 0.5s ease;
				transform: rotate(-90deg);
				transform-origin: 50% 50%;
			}
		</style>
	</head>
	<body class="bg-gray-50 min-h-screen">
		<div class="container mx-auto px-4 py-8">
			<div class="text-center mb-12">
				<h1 class="text-4xl font-bold text-gray-800 mb-4">SEO 與社群媒體預覽檢查工具</h1>
				<p class="text-lg text-gray-600 max-w-2xl mx-auto">
					分析任何網頁的 SEO 設定，並查看其在社群媒體平台分享時的顯示效果。
				</p>
			</div>

			<div class="bg-white rounded-xl shadow-lg p-6 mb-8 max-w-4xl mx-auto">
				<div class="flex flex-col md:flex-row gap-4">
					<input
						type="url"
						id="urlInput"
						placeholder="輸入網址 (例如：https://example.com)"
						class="flex-grow px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
					/>
					<button
						id="analyzeBtn"
						class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition duration-300 flex items-center justify-center"
					>
						<span id="btnText">分析</span>
						<div id="loadingSpinner" class="loading-spinner ml-2 hidden"></div>
					</button>
				</div>
			</div>

			<div id="resultsContainer" class="hidden">
				<!-- SEO 分數 -->
				<div class="bg-white rounded-xl shadow-lg p-6 mb-8">
					<div class="flex flex-col md:flex-row items-center justify-between mb-6">
						<h2 class="text-2xl font-bold text-gray-800">SEO 分析結果</h2>
						<div class="relative w-24 h-24 mt-4 md:mt-0">
							<svg class="w-full h-full" viewBox="0 0 100 100">
								<circle
									class="text-gray-200"
									stroke-width="8"
									stroke="currentColor"
									fill="transparent"
									r="40"
									cx="50"
									cy="50"
								/>
								<circle
									id="scoreCircle"
									class="text-green-500"
									stroke-width="8"
									stroke-linecap="round"
									stroke="currentColor"
									fill="transparent"
									r="40"
									cx="50"
									cy="50"
									stroke-dasharray="251.2"
									stroke-dashoffset="251.2"
								/>
							</svg>
							<div class="absolute inset-0 flex items-center justify-center">
								<span id="scoreValue" class="text-3xl font-bold text-gray-800">0</span>
							</div>
						</div>
					</div>

					<div id="seoDetails" class="grid grid-cols-1 md:grid-cols-2 gap-6">
						<!-- 由 JavaScript 填充 -->
					</div>
				</div>

				<!-- 社群媒體預覽 -->
				<div class="bg-white rounded-xl shadow-lg p-6 mb-8">
					<h2 class="text-2xl font-bold text-gray-800 mb-6">社群媒體預覽</h2>

					<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
						<!-- Facebook 預覽 -->
						<div class="social-card bg-white border border-gray-200 rounded-lg overflow-hidden">
							<div class="bg-blue-600 text-white p-3 flex items-center">
								<i class="fab fa-facebook-f mr-2"></i>
								<span class="font-medium">Facebook</span>
							</div>
							<div class="p-4">
								<div id="facebookPreview" class="border border-gray-200 rounded">
									<div id="facebookImage" class="bg-gray-100 h-40 flex items-center justify-center text-gray-400">
										<i class="fas fa-image text-3xl"></i>
									</div>
									<div class="p-3">
										<div id="facebookSite" class="text-xs text-gray-500 mb-1"></div>
										<div id="facebookTitle" class="font-bold text-sm mb-1 line-clamp-2"></div>
										<div id="facebookDescription" class="text-xs text-gray-600 line-clamp-2"></div>
									</div>
								</div>
							</div>
						</div>

						<!-- Twitter 預覽 -->
						<div class="social-card bg-white border border-gray-200 rounded-lg overflow-hidden">
							<div class="bg-blue-400 text-white p-3 flex items-center">
								<i class="fab fa-twitter mr-2"></i>
								<span class="font-medium">Twitter</span>
							</div>
							<div class="p-4">
								<div id="twitterPreview" class="border border-gray-200 rounded">
									<div id="twitterImage" class="bg-gray-100 h-40 flex items-center justify-center text-gray-400">
										<i class="fas fa-image text-3xl"></i>
									</div>
									<div class="p-3">
										<div id="twitterSite" class="text-xs text-gray-500 mb-1"></div>
										<div id="twitterTitle" class="font-bold text-sm mb-1 line-clamp-2"></div>
										<div id="twitterDescription" class="text-xs text-gray-600 line-clamp-2"></div>
									</div>
								</div>
							</div>
						</div>

						<!-- LinkedIn 預覽 -->
						<div class="social-card bg-white border border-gray-200 rounded-lg overflow-hidden">
							<div class="bg-blue-700 text-white p-3 flex items-center">
								<i class="fab fa-linkedin-in mr-2"></i>
								<span class="font-medium">LinkedIn</span>
							</div>
							<div class="p-4">
								<div id="linkedinPreview" class="border border-gray-200 rounded">
									<div id="linkedinImage" class="bg-gray-100 h-40 flex items-center justify-center text-gray-400">
										<i class="fas fa-image text-3xl"></i>
									</div>
									<div class="p-3">
										<div id="linkedinSite" class="text-xs text-gray-500 mb-1"></div>
										<div id="linkedinTitle" class="font-bold text-sm mb-1 line-clamp-2"></div>
										<div id="linkedinDescription" class="text-xs text-gray-600 line-clamp-2"></div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

				<!-- 原始 Meta 標籤 -->
				<div class="bg-white rounded-xl shadow-lg p-6">
					<h2 class="text-2xl font-bold text-gray-800 mb-6">偵測到的 Meta 標籤</h2>
					<div class="bg-gray-50 rounded-lg p-4 overflow-x-auto">
						<pre id="metaTags" class="text-sm text-gray-800 whitespace-pre-wrap"></pre>
					</div>
				</div>
			</div>

			<div id="errorContainer" class="hidden bg-red-50 border-l-4 border-red-500 p-4 mb-8 rounded">
				<div class="flex">
					<div class="flex-shrink-0">
						<i class="fas fa-exclamation-circle text-red-500 mt-1 mr-3"></i>
					</div>
					<div>
						<h3 class="text-sm font-medium text-red-800" id="errorTitle">錯誤</h3>
						<div class="mt-2 text-sm text-red-700" id="errorMessage">
							<p>分析網址時發生錯誤。請檢查網址後重試。</p>
						</div>
					</div>
				</div>
			</div>
		</div>

		<footer class="bg-gray-100 py-8 mt-12">
			<div class="container mx-auto px-4 text-center text-gray-600">
				<p>© 2023 SEO 與社群媒體預覽檢查工具。保留所有權利。</p>
			</div>
		</footer>

		<script>
			document.addEventListener("DOMContentLoaded", function () {
				const analyzeBtn = document.getElementById("analyzeBtn");
				const urlInput = document.getElementById("urlInput");
				const resultsContainer = document.getElementById("resultsContainer");
				const errorContainer = document.getElementById("errorContainer");
				const loadingSpinner = document.getElementById("loadingSpinner");
				const btnText = document.getElementById("btnText");
				const scoreValue = document.getElementById("scoreValue");
				const scoreCircle = document.getElementById("scoreCircle");
				const seoDetails = document.getElementById("seoDetails");
				const metaTags = document.getElementById("metaTags");

				// 社群預覽元素
				const facebookPreview = {
					image: document.getElementById("facebookImage"),
					site: document.getElementById("facebookSite"),
					title: document.getElementById("facebookTitle"),
					description: document.getElementById("facebookDescription"),
				};

				const twitterPreview = {
					image: document.getElementById("twitterImage"),
					site: document.getElementById("twitterSite"),
					title: document.getElementById("twitterTitle"),
					description: document.getElementById("twitterDescription"),
				};

				const linkedinPreview = {
					image: document.getElementById("linkedinImage"),
					site: document.getElementById("linkedinSite"),
					title: document.getElementById("linkedinTitle"),
					description: document.getElementById("linkedinDescription"),
				};

				analyzeBtn.addEventListener("click", analyzeSEO);
				urlInput.addEventListener("keypress", function (e) {
					if (e.key === "Enter") analyzeSEO();
				});

				function analyzeSEO() {
					const url = urlInput.value.trim();

					if (!url) {
						showError("請輸入網址", "網址欄位不能為空。");
						return;
					}

					// 驗證網址格式
					try {
						new URL(url);
					} catch (e) {
						showError("無效的網址", "請輸入包含 http:// 或 https:// 的有效網址");
						return;
					}

					// 顯示載入狀態
					loadingSpinner.classList.remove("hidden");
					btnText.textContent = "分析中...";
					analyzeBtn.disabled = true;
					resultsContainer.classList.add("hidden");
					errorContainer.classList.add("hidden");

					// 在實際應用中，這裡會進行 API 呼叫
					// 在此演示中，我們將在延遲後模擬 API 回應
					setTimeout(() => {
						try {
							// 模擬 API 回應
							const seoData = simulateSEOAnalysis(url);
							displayResults(seoData);
						} catch (error) {
							showError("分析錯誤", error.message);
						} finally {
							loadingSpinner.classList.add("hidden");
							btnText.textContent = "分析";
							analyzeBtn.disabled = false;
						}
					}, 1500);
				}

				function simulateSEOAnalysis(url) {
					// 這是模擬 - 在實際應用中，您會從 API 獲取這些數據
					// 該 API 會抓取網址並分析其 SEO

					// 為演示目的隨機生成分數 (30-100)
					const score = Math.floor(Math.random() * 70) + 30;

					// 模擬的 meta 標籤
					const metaTags = {
						title: "範例頁面標題 - 您的網站名稱",
						description: "這是一個可能出現在搜尋結果中的範例 meta 描述。長度應在 50-160 個字元之間。",
						keywords: "範例, 關鍵字, seo, 測試",
						viewport: "width=device-width, initial-scale=1.0",
						"og:title": "範例 Open Graph 標題",
						"og:description": "這是用於社群分享的 Open Graph 描述範例。",
						"og:image": "https://via.placeholder.com/1200x630",
						"og:url": url,
						"og:type": "website",
						"twitter:card": "summary_large_image",
						"twitter:title": "範例 Twitter 卡片標題",
						"twitter:description": "這是 Twitter 卡片的描述範例。",
						"twitter:image": "https://via.placeholder.com/1200x630",
						canonical: url,
						robots: "index, follow",
					};

					// 模擬的 SEO 分析
					const analysis = [
						{
							title: "標題標籤",
							status: metaTags.title ? "good" : "bad",
							value: metaTags.title || "缺少",
							recommendation: metaTags.title
								? metaTags.title.length > 60
									? "考慮縮短 (最佳長度: 50-60 字元)"
									: "長度適當"
								: "添加描述性標題 (50-60 字元)",
							icon: metaTags.title ? "check-circle" : "times-circle",
							color: metaTags.title ? "green" : "red",
						},
						{
							title: "Meta 描述",
							status: metaTags.description ? "good" : "bad",
							value: metaTags.description || "缺少",
							recommendation: metaTags.description
								? metaTags.description.length > 160
									? "考慮縮短 (最佳長度: 50-160 字元)"
									: "長度適當"
								: "添加引人注目的描述 (50-160 字元)",
							icon: metaTags.description ? "check-circle" : "times-circle",
							color: metaTags.description ? "green" : "red",
						},
						{
							title: "Open Graph 標籤",
							status: metaTags["og:title"] && metaTags["og:description"] && metaTags["og:image"] ? "good" : "bad",
							value: metaTags["og:title"] ? "存在" : "缺少",
							recommendation: "社群分享必備",
							icon:
								metaTags["og:title"] && metaTags["og:description"] && metaTags["og:image"]
									? "check-circle"
									: "times-circle",
							color: metaTags["og:title"] && metaTags["og:description"] && metaTags["og:image"] ? "green" : "red",
						},
						{
							title: "Twitter 卡片標籤",
							status:
								metaTags["twitter:card"] && metaTags["twitter:title"] && metaTags["twitter:image"] ? "good" : "bad",
							value: metaTags["twitter:title"] ? "存在" : "缺少",
							recommendation: "Twitter 分享重要標籤",
							icon:
								metaTags["twitter:card"] && metaTags["twitter:title"] && metaTags["twitter:image"]
									? "check-circle"
									: "times-circle",
							color:
								metaTags["twitter:card"] && metaTags["twitter:title"] && metaTags["twitter:image"] ? "green" : "red",
						},
						{
							title: "行動裝置友善",
							status: metaTags.viewport ? "good" : "bad",
							value: metaTags.viewport ? "響應式" : "未知",
							recommendation: "確保設置 viewport meta 標籤",
							icon: metaTags.viewport ? "check-circle" : "times-circle",
							color: metaTags.viewport ? "green" : "red",
						},
						{
							title: "標準網址",
							status: metaTags.canonical ? "good" : "bad",
							value: metaTags.canonical ? "存在" : "缺少",
							recommendation: "有助於防止重複內容問題",
							icon: metaTags.canonical ? "check-circle" : "times-circle",
							color: metaTags.canonical ? "green" : "red",
						},
					];

					return {
						score,
						analysis,
						metaTags,
						url,
					};
				}

				function displayResults(data) {
					// 更新分數
					scoreValue.textContent = data.score;
					const circumference = 251.2; // 2 * π * r (r=40)
					const offset = circumference - (circumference * data.score) / 100;
					scoreCircle.style.strokeDashoffset = offset;

					// 更新分析細節
					seoDetails.innerHTML = "";
					data.analysis.forEach((item) => {
						const itemHTML = `
                        <div class="bg-gray-50 rounded-lg p-4">
                            <div class="flex items-start">
                                <div class="flex-shrink-0 mt-1">
                                    <i class="fas fa-${item.icon} text-${item.color}-500 mr-3"></i>
                                </div>
                                <div>
                                    <h3 class="font-bold text-gray-800">${item.title}</h3>
                                    <p class="text-sm text-gray-600 mt-1">${item.value}</p>
                                    <p class="text-xs mt-2 text-${item.color}-600">${item.recommendation}</p>
                                </div>
                            </div>
                        </div>
                    `;
						seoDetails.insertAdjacentHTML("beforeend", itemHTML);
					});

					// 更新社群預覽
					updateSocialPreview(facebookPreview, {
						title: data.metaTags["og:title"] || data.metaTags.title,
						description: data.metaTags["og:description"] || data.metaTags.description,
						image: data.metaTags["og:image"],
						site: new URL(data.url).hostname,
					});

					updateSocialPreview(twitterPreview, {
						title: data.metaTags["twitter:title"] || data.metaTags["og:title"] || data.metaTags.title,
						description:
							data.metaTags["twitter:description"] || data.metaTags["og:description"] || data.metaTags.description,
						image: data.metaTags["twitter:image"] || data.metaTags["og:image"],
						site: new URL(data.url).hostname,
					});

					updateSocialPreview(linkedinPreview, {
						title: data.metaTags["og:title"] || data.metaTags.title,
						description: data.metaTags["og:description"] || data.metaTags.description,
						image: data.metaTags["og:image"],
						site: new URL(data.url).hostname,
					});

					// 顯示原始 meta 標籤
					metaTags.textContent = JSON.stringify(data.metaTags, null, 2);

					// 顯示結果
					resultsContainer.classList.remove("hidden");
				}

				function updateSocialPreview(preview, data) {
					if (data.title) preview.title.textContent = data.title;
					if (data.description) preview.description.textContent = data.description;
					if (data.site) preview.site.textContent = data.site;

					if (data.image) {
						preview.image.innerHTML = "";
						const img = document.createElement("img");
						img.src = data.image;
						img.alt = "";
						img.className = "w-full h-full object-cover";
						preview.image.appendChild(img);
					}
				}

				function showError(title, message) {
					errorContainer.classList.remove("hidden");
					document.getElementById("errorTitle").textContent = title;
					document.getElementById("errorMessage").innerHTML = `<p>${message}</p>`;

					// 滾動到錯誤訊息
					errorContainer.scrollIntoView({ behavior: "smooth" });
				}
			});
		</script>
	</body>
</html>
